# TEST_TYPE: runtime
# EXPECTED_OUTPUT: 42

# Test triple-nested generics: Result<Maybe<Result<i32>>>
# "Deep Thought computed for seven and a half million years"

fn main() i32:
    # The Answer computed by Deep Thought
    let Result<i32, StdError> innermost = Result.Ok(42)
    let Maybe<Result<i32, StdError>> middle = Maybe.Some(innermost)
    let Result<Maybe<Result<i32, StdError>>, StdError> outermost = Result.Ok(middle)

    # Unwrap all three layers
    match outermost:
        Result.Ok(maybe_val) ->
            match maybe_val:
                Maybe.Some(result_val) ->
                    match result_val:
                        Result.Ok(answer) ->
                            println("{answer}")
                            return Result.Ok(0)
                        Result.Err(_) ->
                            return Result.Ok(1)
                Maybe.None() ->
                    return Result.Ok(2)
        Result.Err(_) ->
            return Result.Ok(3)
