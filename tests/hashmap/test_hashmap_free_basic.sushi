# Test HashMap.free() with primitive values
fn main() i32:
    let HashMap<i32, string> map = HashMap.new()

    # Insert some values
    map.insert(1, "one")
    map.insert(2, "two")
    map.insert(3, "three")

    println("Before free:")
    map.debug()

    let i32 size_before = map.len()
    println("Size before free: {size_before}")

    # Free the map
    map.free()

    println("\nAfter free:")
    map.debug()

    let i32 size_after = map.len()
    println("Size after free: {size_after}")

    # Verify map is reset
    if (size_after == 0):
        println("✓ Map is empty after free")

    # Insert new values after free
    map.insert(10, "ten")
    map.insert(20, "twenty")

    println("\nAfter re-inserting:")
    map.debug()

    let i32 final_size = map.len()
    if (final_size == 2):
        println("✓ Can reuse map after free")

    return Result.Ok(0)
