# TEST_TYPE: runtime
# EXPECTED_OUTPUT: Error: File not found - nonexistent_file_12345.txt
# EXPECTED_OUTPUT: Handled file error successfully

use <io/stdio>
use <io/files>

fn main() i32:
    # Try to open a file that doesn't exist
    let FileResult result = open("nonexistent_file_12345.txt", FileMode.Read())

    match result:
        FileResult.Ok(f) ->
            stderr.write("Error: should not have succeeded!\n")
            f.close()
            return Result.Err(StdError.Error)
        FileResult.Err(err) ->
            # We have the FileError enum value, now match on it
            match err:
                FileError.NotFound ->
                    println("Error: File not found - nonexistent_file_12345.txt")
                    println("Handled file error successfully")
                    return Result.Ok(0)
                _ ->
                    stderr.write("Error: unexpected error type\n")
                    return Result.Err(StdError.Error)

    return Result.Ok(0)
