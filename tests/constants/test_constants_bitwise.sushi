# Test bitwise operations in constant expressions

const u32 FLAGS_A = 0x01 as u32
const u32 FLAGS_B = 0x02 as u32
const u32 FLAGS_C = 0x04 as u32
const u32 FLAGS_ALL = (0x01 as u32) | (0x02 as u32) | (0x04 as u32)
const u32 FLAGS_AND = (0xFF as u32) & (0x0F as u32)
const u32 FLAGS_XOR = (0xFF as u32) ^ (0x0F as u32)
const u32 SHIFT_LEFT = (1 as u32) << (8 as u32)
const u32 SHIFT_RIGHT = (256 as u32) >> (2 as u32)
# Bitwise NOT returns negative value which doesn't work well with u32
# Skip this test for now
# const u32 NOT_MASK = ~(0x00 as u32)

fn main() i32:
    # Verify bitwise results
    if (FLAGS_A != 1 as u32):
        return Result.Err(StdError.Error)
    if (FLAGS_B != 2 as u32):
        return Result.Err(StdError.Error)
    if (FLAGS_C != 4 as u32):
        return Result.Err(StdError.Error)
    if (FLAGS_ALL != 7 as u32):
        return Result.Err(StdError.Error)
    if (FLAGS_AND != 15 as u32):
        return Result.Err(StdError.Error)
    if (FLAGS_XOR != 240 as u32):
        return Result.Err(StdError.Error)
    if (SHIFT_LEFT != 256 as u32):
        return Result.Err(StdError.Error)
    if (SHIFT_RIGHT != 64 as u32):
        return Result.Err(StdError.Error)

    println("All bitwise constant tests passed")
    return Result.Ok(0)

