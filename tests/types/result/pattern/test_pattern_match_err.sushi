# EXPECT_RUNTIME_EXIT: 0
# EXPECT_STDOUT_CONTAINS: PASS: Err pattern match with binding works
# EXPECT_STDERR_EMPTY: true

# Tests pattern matching on Err variant with binding

enum MyError:
    BadValue
    EmptyInput

fn get_error() i32 | MyError:
    return Result.Err(MyError.BadValue)

fn main() i32:
    match get_error():
        Result.Ok(_) ->
            println("FAIL: Got Ok instead of Err")
            return Result.Ok(1)
        Result.Err(error) ->
            match error:
                MyError.BadValue ->
                    println("PASS: Err pattern match with binding works")
                    return Result.Ok(0)
                MyError.EmptyInput ->
                    println("FAIL: Got wrong error variant")
                    return Result.Ok(1)
