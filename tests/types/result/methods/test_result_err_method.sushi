# EXPECT_RUNTIME_EXIT: 0
# EXPECT_STDOUT_CONTAINS: PASS: err returns None for Ok
# EXPECT_STDOUT_CONTAINS: PASS: err returns Some(error) for Err
# EXPECT_STDERR_EMPTY: true

# Tests err method that returns Maybe<E>

enum MyError:
    BadInput
    Timeout

fn get_ok() i32 | MyError:
    return Result.Ok(42)

fn get_err() i32 | MyError:
    return Result.Err(MyError.BadInput)

fn main() i32:
    let Maybe<MyError> maybe_err1 = get_ok().err()
    if (maybe_err1.is_none()):
        println("PASS: err returns None for Ok")
    else:
        println("FAIL: err should return None for Ok")
        return Result.Ok(1)

    let Maybe<MyError> maybe_err2 = get_err().err()
    if (maybe_err2.is_some()):
        match maybe_err2:
            Maybe.Some(MyError.BadInput) ->
                println("PASS: err returns Some(error) for Err")
                return Result.Ok(0)
            Maybe.Some(_) ->
                println("FAIL: err returned wrong error variant")
                return Result.Ok(1)
            Maybe.None() ->
                println("FAIL: err returned None for Err")
                return Result.Ok(1)
    else:
        println("FAIL: err should return Some for Err")
        return Result.Ok(1)
