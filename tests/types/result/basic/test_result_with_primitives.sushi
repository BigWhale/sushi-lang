# EXPECT_RUNTIME_EXIT: 0
# EXPECT_STDOUT_CONTAINS: PASS: i32 works
# EXPECT_STDOUT_CONTAINS: PASS: string works
# EXPECT_STDOUT_CONTAINS: PASS: bool works
# EXPECT_STDERR_EMPTY: true

# Tests Result<T, E> with primitive types

fn test_i32() i32:
    return Result.Ok(42)

fn test_string() string:
    return Result.Ok("Mostly Harmless")

fn test_bool() bool:
    return Result.Ok(true)

fn main() i32:
    match test_i32():
        Result.Ok(value) ->
            if (value == 42):
                println("PASS: i32 works")
            else:
                println("FAIL: i32 wrong value")
                return Result.Ok(1)
        Result.Err(_) ->
            println("FAIL: i32 got error")
            return Result.Ok(1)

    match test_string():
        Result.Ok(value) ->
            if (value == "Mostly Harmless"):
                println("PASS: string works")
            else:
                println("FAIL: string wrong value")
                return Result.Ok(1)
        Result.Err(_) ->
            println("FAIL: string got error")
            return Result.Ok(1)

    match test_bool():
        Result.Ok(value) ->
            if (value):
                println("PASS: bool works")
            else:
                println("FAIL: bool wrong value")
                return Result.Ok(1)
        Result.Err(_) ->
            println("FAIL: bool got error")
            return Result.Ok(1)

    return Result.Ok(0)
