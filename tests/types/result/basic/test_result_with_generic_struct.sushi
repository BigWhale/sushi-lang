# EXPECT_RUNTIME_EXIT: 0
# EXPECT_STDOUT_CONTAINS: PASS: Generic struct in Result works
# EXPECT_STDERR_EMPTY: true

# Tests Result with generic struct types

struct Pair<T, U>:
    T first
    U second

enum MyError:
    Error

fn make_pair() Result<Pair<i32, string>, MyError>:
    return Result.Ok(Pair(42, "answer"))

fn main() i32:
    match make_pair():
        Result.Ok(pair) ->
            if (pair.first == 42 and pair.second == "answer"):
                println("PASS: Generic struct in Result works")
                return Result.Ok(0)
            else:
                println("FAIL: Wrong pair values")
                return Result.Ok(1)
        Result.Err(_) ->
            println("FAIL: Got error")
            return Result.Ok(1)
