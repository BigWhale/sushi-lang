use <io/files>
use <io/stdio>

fn main() i32:
    match mkdir("/tmp/test_mkdir", 0o755):
        Result.Ok(_) -> println("Created")
        Result.Err() -> return Result.Ok(1)

    if (not exists("/tmp/test_mkdir")):
        println("ERROR: Directory should exist")
        return Result.Ok(1)

    if (not is_dir("/tmp/test_mkdir")):
        println("ERROR: Path should be a directory")
        return Result.Ok(1)

    match rmdir("/tmp/test_mkdir"):
        Result.Ok(_) -> println("Removed")
        Result.Err() -> return Result.Ok(1)

    if (exists("/tmp/test_mkdir")):
        println("ERROR: Directory should be removed")
        return Result.Ok(1)

    println("OK: mkdir() and rmdir() work")
    return Result.Ok(0)
