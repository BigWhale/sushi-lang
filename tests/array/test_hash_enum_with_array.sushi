# Test hash method for enums with array variant data

enum Response:
    Ok(i32[2])
    Error(string)

enum DynamicData:
    Values(i32[])
    Empty()

fn main() i32:
    # Test enum with fixed array variant data
    let Response r1 = Response.Ok([42, 100])
    let u64 hash1 = r1.hash()
    println("Response.Ok([42, 100]).hash() = {hash1}")

    # Same values should have same hash
    let Response r2 = Response.Ok([42, 100])
    let u64 hash2 = r2.hash()
    if (hash1 == hash2):
        println("✓ Same enum with array data produce same hash")
    else:
        println("✗ Same enum with array data produce different hash")

    # Different values should have different hash
    let Response r3 = Response.Ok([99, 88])
    let u64 hash3 = r3.hash()
    if (hash1 != hash3):
        println("✓ Different array values in enum produce different hashes")
    else:
        println("✗ Different array values in enum produce same hash")

    # Different variants should have different hash
    let Response r4 = Response.Error("fail")
    let u64 hash4 = r4.hash()
    if (hash1 != hash4):
        println("✓ Different enum variants produce different hashes")
    else:
        println("✗ Different enum variants produce same hash")

    # Test enum with dynamic array
    let DynamicData d1 = DynamicData.Values(from([1, 2, 3]))
    let u64 d1_hash = d1.hash()
    println("DynamicData.Values([1,2,3]).hash() = {d1_hash}")

    # Same values should have same hash
    let DynamicData d2 = DynamicData.Values(from([1, 2, 3]))
    let u64 d2_hash = d2.hash()
    if (d1_hash == d2_hash):
        println("✓ Same enum with dynamic array data produce same hash")
    else:
        println("✗ Same enum with dynamic array data produce different hash")

    # Empty variant should have different hash
    let DynamicData d3 = DynamicData.Empty()
    let u64 d3_hash = d3.hash()
    if (d1_hash != d3_hash):
        println("✓ Empty variant has different hash")
    else:
        println("✗ Empty variant has same hash")

    # Note: Cleanup would destroy arrays, skipping for now
    # Arrays are cleaned up automatically at end of scope

    return Result.Ok(0)
