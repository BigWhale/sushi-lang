# Test method calls on array parameters

fn safe_get(i32[] arr, i32 index) i32:
    return Result.Ok(arr.get(index)??)

fn check_capacity(string[] arr) i32:
    return Result.Ok(arr.capacity())

fn pop_last(bool[] arr) bool:
    return Result.Ok(arr.pop())

fn chain_methods(i32[] arr) i32:
    print(arr.push(42))
    print(arr.push(24))
    return Result.Ok(arr.len())

fn main() i32:
    # Test get method on parameter
    let i32[] numbers = from([10, 20, 30])
    let Result<i32, StdError> value_result = safe_get(numbers, 1)
    print(value_result.realise(0))  # Should print 20

    # Test capacity method
    let string[] names = from(["Arthur", "Trillian"])
    let Result<i32, StdError> cap_result = check_capacity(names)
    print(cap_result.realise(0))    # Should print capacity >= 2

    # Test pop method
    let bool[] flags = from([true, false, true])
    let Result<bool, StdError> last_result = pop_last(flags)
    print(last_result.realise(false))   # Should print true
    print(flags.len())  # Should print 2

    # Test method chaining on parameter
    let i32[] test_arr = from([1, 2])
    let Result<i32, StdError> final_len_result = chain_methods(test_arr)
    print(final_len_result.realise(0))    # Should print 4
    print(test_arr.len())  # Should also print 4

    return Result.Ok(0)
