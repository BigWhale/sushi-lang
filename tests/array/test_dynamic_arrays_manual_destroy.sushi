# Test dynamic array manual destroy functionality
fn run_test() i32:
  # Test explicit destroy
  let i32[] numbers = from([1, 2, 3, 4, 5])
  print(numbers.len())      # Should print 5
  print(numbers.get(2)??)     # Should print 3

  # Manually destroy the array
  print(numbers.destroy())  # Destroy and print result (0)

  # Test that destroy can be called in different scenarios
  let string[] words = new()
  print(words.push("hello"))  # Push and print result (0)
  print(words.push("world"))  # Push and print result (0)
  print(words.len())        # Should print 2
  print(words.destroy())    # Destroy and print result (0)

  # Test destroy in conditional blocks
  if (true):
    let bool[] flags = from([true, false, true])
    print(flags.len())      # Should print 3
    print(flags.destroy())  # Manual cleanup before scope ends
  # Should not double-destroy when scope ends

  return Result.Ok(0)

fn main() i32:
    let i32 result = run_test().realise(99)
    return Result.Ok(result)
