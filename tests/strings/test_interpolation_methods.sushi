# Test interpolation with various string methods using single-quote args

use <collections/strings>

fn test_chained_methods() ~:
    let string s = "  hello  "
    let string result = s.trim().pad_left(10, '*')
    let string interp = "{s.trim().pad_left(10, '*')}"
    if (interp == result):
        println("PASS: Chained method calls")
    else:
        println("FAIL: Chained methods")
    return Result.Ok(~)

fn test_contains() ~:
    let string s = "hello world"
    let string interp = "{s.contains('world')}"
    if (interp == "true"):
        println("PASS: contains method")
    else:
        println("FAIL: contains method")
    return Result.Ok(~)

fn test_starts_with() ~:
    let string s = "hello world"
    let string interp = "{s.starts_with('hello')}"
    if (interp == "true"):
        println("PASS: starts_with method")
    else:
        println("FAIL: starts_with method")
    return Result.Ok(~)

fn test_ends_with() ~:
    let string s = "hello world"
    let string interp = "{s.ends_with('world')}"
    if (interp == "true"):
        println("PASS: ends_with method")
    else:
        println("FAIL: ends_with method")
    return Result.Ok(~)

fn test_count() ~:
    let string s = "hello"
    let string interp = "{s.count('l')}"
    if (interp == "2"):
        println("PASS: count method")
    else:
        println("FAIL: count method")
    return Result.Ok(~)

fn main() i32:
    if (test_chained_methods()):
        println("")
    if (test_contains()):
        println("")
    if (test_starts_with()):
        println("")
    if (test_ends_with()):
        println("")
    if (test_count()):
        println("")
    return Result.Ok(0)
