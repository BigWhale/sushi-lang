use <io/files>

fn main() i32:
    match open("/tmp/size_test.txt", FileMode.Write()):
        FileResult.Ok(f) ->
            f.writeln("Hello, World!")
            f.close()
        FileResult.Err(_) ->
            return Result.Ok(1)

    match file_size("/tmp/size_test.txt"):
        Result.Ok(size) ->
            if (size != 14 as i64):
                println("ERROR: Expected size 14, got {size}")
                return Result.Ok(1)
        Result.Err() ->
            return Result.Ok(1)

    match file_size("/tmp/nonexistent_12345.txt"):
        Result.Err() -> println("OK: Correctly returns Err for non-existent file")
        Result.Ok(s) ->
            println("ERROR: Should return Err, got Ok({s})")
            return Result.Ok(1)

    println("OK: file_size() works correctly")
    return Result.Ok(0)
