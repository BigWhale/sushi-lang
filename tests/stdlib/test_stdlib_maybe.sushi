# TEST: Maybe<T> stdlib methods
# Tests all 4 Maybe<T> methods with stdlib implementation


fn main() i32:
    # Test is_some() with Some variant
    let Maybe<i32> some_val = Maybe.Some(42)
    if (some_val.is_some()):
        println("✓ is_some() on Some(42) = true")
    else:
        println("✗ is_some() on Some(42) = false (FAIL)")

    # Test is_some() with None variant
    let Maybe<i32> none_val = Maybe.None()
    if (some_val.is_some()):
        println("✓ is_some() on None() = false... wait")

    if (none_val.is_none()):
        println("✓ is_none() on None() = true")
    else:
        println("✗ is_none() on None() = false (FAIL)")

    # Test is_none() with Some variant
    if (some_val.is_none()):
        println("✗ is_none() on Some(42) = true (FAIL)")
    else:
        println("✓ is_none() on Some(42) = false")

    # Test realise() with Some variant
    let i32 val1 = some_val.realise(99)
    if (val1 == 42):
        println("✓ realise(99) on Some(42) = 42")
    else:
        println("✗ realise(99) on Some(42) = {val1} (FAIL)")

    # Test realise() with None variant
    let i32 val2 = none_val.realise(99)
    if (val2 == 99):
        println("✓ realise(99) on None() = 99")
    else:
        println("✗ realise(99) on None() = {val2} (FAIL)")

    # Test with string type
    let Maybe<string> some_str = Maybe.Some("Mostly Harmless")
    let string str1 = some_str.realise("default")
    println("✓ Maybe<string> realise: {str1}")

    let Maybe<string> none_str = Maybe.None()
    let string str2 = none_str.realise("default")
    println("✓ Maybe<string> realise on None: {str2}")

    # Test with bool type
    let Maybe<bool> some_bool = Maybe.Some(true)
    if (some_bool.is_some()):
        println("✓ Maybe<bool> is_some() works")

    let bool b1 = some_bool.realise(false)
    if (b1):
        println("✓ Maybe<bool> realise works")

    # Test with f64 type
    let Maybe<f64> some_float = Maybe.Some(3.14)
    let f64 f1 = some_float.realise(0.0)
    println("✓ Maybe<f64> realise: {f1}")

    # Test expect() with Some variant (should NOT panic)
    let Maybe<i32> some_val2 = Maybe.Some(100)
    let i32 expected_val = some_val2.expect("Should not panic!")
    if (expected_val == 100):
        println("✓ expect() on Some(100) returned 100")
    else:
        println("✗ expect() on Some(100) returned {expected_val} (FAIL)")

    println("All Maybe<T> stdlib tests passed!")
    return Result.Ok(0)
