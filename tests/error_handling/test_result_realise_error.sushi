# Test: Using Result<T>.realise() with error case where T is a user-defined generic
# TEST_TYPE: runtime
# EXPECTED_OUTPUT: Default: Left(99)

enum Either<T, U>:
    Left(T)
    Right(U)

fn test_return_error() Either<i32, string>:
    return Result.Err()

fn main() i32:
    # Get a Result<Either<i32, string>> that is an error
    let Result<Either<i32, string>> ret = test_return_error()

    # Use .realise() to extract with default (should return the default)
    let Either<i32, string> either_val = ret.realise(Either.Left(99))

    # Verify we got the default value
    match either_val:
        Either.Left(x) ->
            println("Default: Left({x})")
        Either.Right(s) ->
            println("Default: Right({s})")

    return Result.Ok(0)
