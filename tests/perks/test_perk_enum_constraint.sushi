# Test generic function with enum implementing perk constraint

perk Hashable:
    fn hash() u64

enum Status:
    Active(i32)
    Inactive()

extend Status with Hashable:
    fn hash() u64:
        match self:
            Status.Active(n) -> return n as u64
            Status.Inactive() -> return 0 as u64

fn compute_hash<T: Hashable>(T value) u64:
    return Result.Ok(value.hash())

fn run_test() i32:
    let Status s = Status.Active(100)
    let u64 h = compute_hash(s)??
    println(h)
    return Result.Ok(0)

fn main() i32:
    let i32 result = run_test().realise(99)
    return Result.Ok(result)
