# Test pattern matching on List<Struct>.get() inside while loop

struct Node:
    i32 value
    Maybe<i32> next

fn main() i32:
    let List<Node> nodes = List.new()
    let Node node1 = Node(10, Maybe.Some(1))
    let Node node2 = Node(20, Maybe.None())
    nodes.push(node1)
    nodes.push(node2)

    let Maybe<i32> current = Maybe.Some(0)
    while (current.is_some()):
        let i32 idx = current.realise(-1)

        match nodes.get(idx):
            Maybe.Some(n) ->
                println("Value: {n.value}")
                current := n.next
            Maybe.None() ->
                break

    return Result.Ok(0)
