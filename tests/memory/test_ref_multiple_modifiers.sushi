# Test: Multiple functions modifying the same reference in sequence
# Should compile and run successfully

fn set_to_zero(&poke i32 x) ~:
    x := 0
    return Result.Ok(~)

fn add_ten(&poke i32 x) ~:
    x := x + 10
    return Result.Ok(~)

fn double_it(&poke i32 x) ~:
    x := x * 2
    return Result.Ok(~)

fn main() i32:
    let i32 value = 5
    println(value)

    set_to_zero(&poke value)
    println(value)

    add_ten(&poke value)
    println(value)

    double_it(&poke value)
    println(value)

    return Result.Ok(0)
