# Test explicit manual cleanup with Own<T>.destroy()
# This test demonstrates that manual .destroy() prevents RAII double-free
# The Own<T> is explicitly destroyed, so RAII should skip it

fn main() i32:
    let Own<i32> ptr1 = Own.alloc(10)
    let Own<i32> ptr2 = Own.alloc(20)
    let Own<i32> ptr3 = Own.alloc(30)

    # Use ptr1 and ptr2
    let i32 val1 = ptr1.get()
    let i32 val2 = ptr2.get()

    # Manually destroy ptr1 and ptr2
    ptr1.destroy()
    ptr2.destroy()

    # ptr3 will be automatically destroyed by RAII
    let i32 val3 = ptr3.get()

    # Compute result: 10 + 20 + 30 = 60
    let i32 result = val1 + val2 + val3
    let i32 expected = 60
    return Result.Ok(result - expected)
