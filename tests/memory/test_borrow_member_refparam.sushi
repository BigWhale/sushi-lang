# TEST_TYPE: runtime
# EXPECTED_OUTPUT: 8080
# EXPECTED_OUTPUT: 9000

struct Config:
    i32 port

fn set_port(&poke i32 p) ~:
    p := 9000
    return Result.Ok(~)

fn update_config(&poke Config cfg) ~:
    set_port(&poke cfg.port)
    return Result.Ok(~)

fn main() i32:
    let Config c = Config(8080)
    println(c.port)
    update_config(&poke c)
    println(c.port)
    return Result.Ok(0)
