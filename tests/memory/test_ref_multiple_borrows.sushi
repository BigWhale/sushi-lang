# Test multiple sequential borrows (non-overlapping)

fn print_len(&poke i32[] arr) ~:
    println(arr.len())
    return Result.Ok(~)

fn print_first(&poke i32[] arr) ~:
    println(arr.get(0)??)
    return Result.Ok(~)

fn run_test() i32:
    let i32[] numbers = from([1, 2, 3, 4, 5])

    # First borrow
    print_len(&poke numbers)

    # Second borrow (first has ended)
    print_first(&poke numbers)

    # Third borrow
    print_len(&poke numbers)

    # Original still valid
    println(numbers.get(2)??)

    return Result.Ok(0)

fn main() i32:
    let i32 result = run_test().realise(99)
    return Result.Ok(result)
